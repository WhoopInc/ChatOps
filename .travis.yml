language: node_js
node_js:
- '5'
sudo: required
services:
- docker
before_install:
- openssl aes-256-cbc -K $encrypted_19134462ce56_key -iv $encrypted_19134462ce56_iv
  -in ecs-task.json.enc -out ecs-task.json -d
- pip install --user awscli
- export PATH=$PATH:$HOME/.local/bin
script:
- npm test
deploy:
  skip_cleanup: true
  provider: script
  script: "./deploy.bash"
env:
  # GLOBAL SECURE
    # AWS
    # SLACK
    # GITHUB
    # DATADOG
    # REFRESH_DATASTORE
global:
  - secure: t3Ple3PRf984rKZi/dWM46T0egX/zUyABjgc/k79AfxFDdyllTIKsL8Yac/SvOcOiwz/p5MYMIDlyGKLJ1T8+rcIepG208E7Mziy3UOzyPnMEschZG/2WcmPT+ucUWigK1QRYIg4jqS3l23/ueMCFJ3FZCWvUOMzMCT2cWY42nEb0AmzOyrsumlxRo52oqnVyfgyQNwZ1+8ELJHoFDsEWbYoyVTugGMDQ23RGTNEakiU6VKJMSzS2153jvSCDFkARnCh5XpbS/19/96CLwR/Y8obbMfGbdpFFq7Y+XPtYNn+G6RPk1z8c83k9ynin7J94WxgaClUPYY7FDWj2z82P8FgoImaQ3zT3Dont40SdfMd9JcUOiNsph16ImOuf+VokUy4VwNPmLapRHA9ktF3YVgatHYZUlUcTe7sNSgAF0k2IBgB0nEzfm2j8goIT4+FpL7X29LqyfIaw9ICFctYZzr4n2eKgmAUEMhVFlKHgnlRchwNvT9JH8SBRcUfAIr48vTeNhDLiOYJKVvCVGdwAER45d+/tNb3wQDZIomlZLWlPdjQCXqn1HEsRv/wYGtXynjzds55Yt/Ln1DaPFHIWJQD63Vg8Lo2vkDatcHT1YQKd9oG8xyge7C97yaXHeDcF0DSwPyOV+k+FjExpPQSHpMcUD18huuN/9IK4I8ttuQ=
  - secure: 1J85wJvWNMztbDFPLDpgSZLCQ2Hyo1t5RaKVa1MOU5OYjWSF66TEAchD5AMgAbhSxP6YW2Yxg4wof8FcYYRF2ZlEEeOOfEY1HXu1N70IbRPlZYOkf9JyGy4x3VSX3Kp4wpQ/3FaHNpDYnqyyzZcYLZuRzbi9XGEc/koJ3ZkxWmRcEacmAyRfPghhvh4B2ihmKxdIofn476xh+fWkskt3LmszQ223r4S9sShogJHXdVEtapihEgde8IfN7WrwyCrA8pi9+BWFEMELdCCnur5evoWtYeknZeIeCsovdKXY0SSCj3rqbjO54kWgYErYhnQVTmiQlKK2XwPHYXq7gJy5B3Jcr+utN/nanIcKerOAqyA03tr/tRXfR+HeT4WkMRq8wzkOXs/WQdGx4dNTHu+YihV/XxSP3U/y3JwB+GpfFxLB96XjFkhw/CJyIOI/DIA5jCtKc3fenvFY2XvTokeOEOQGP90VPKzTATmP6L4hx/yE73PnNravDk4r3+JF7obnMsZpyuthE0MxMpFDB4S492WwI7W8WZPZ0HkYQBlp1bX07osIC9z391caXbEYL8HaobOLY5ax/FLgNORl4RQ4hG23OAWPz1oYyxDStDCF+9d2/yAWAb+CBVwdyQAV7rfSyZpJgLoHsr0Nfa8jRwPvCaXiWob3iUTiEldY+4R3KtM=
  - secure: wfmFCCls49MFSroQECiOtUZBzL7Ejb3R0UqkaoSFrqpBxPGuY++Cu5qVXTIhw7Ht40eYsOB9bRdUutWW8G1VoDWKwTSx1rsgkq4h++Gv0+1IExDJt+8kjV1DBscX0Ts6VJf3FYhv0/eOGzXJaGa6wMrrEuA5J0N3MZnxyNn1nZT26jAEdgNOR4m1HH0/r48bOF0IgCMMDl/fZdGaD55V+8G08yL0uSDPlPmp+ebKoTsRIMUzGa2qEX665W4/kB1lP0RWJiShJlQ6+PJAKUs5VaRv2qQhPcQ8Z6BHG3T6splnv08eLdXeqzkK9zsO30N4zVWjnIeAmM+J3vkZIaGxVLmOuSz/TVwWYP8eMQ7eRP/g5KhzjYULOTJ0Wn6VQZqX3vFFYWLpuNkRKKNUi0anrEjjPKYsE4evbIyPxRUV18rpQOC8rv5Avji0viDADziryyzhJ42EbOYKIDfj9LTdNQU7/jnhQXZ94ueimKyZpwsGhEFhyQc3kYqZ9d9KdYLyv2NpmUp1iKV5BnG5HSxTAc80hFY14W6ZnOKkm5WaXqljvNYDePMQjIfUzourafLIKAmU529PjKaayNifGpMLwfD3j0A6s1rKVc2VCBbAz/D5srScgUGsZ0iD00brSOzTC5ndr5LR860+kif6+AMEQaxM53Nl3/mc1yuyGZGoSDU=
  - secure: f87LchUdGmIlqAv1eoWLyYmQzDqhth1wmXf47SjayD+9BzJxGF65ITzI+io+NQkry9zV2c42GTiQ0llp+F3ovp2UAxtAq9iOk4PK6Adr+OG/xkgchXU1JGR+/48Ho6HbpU0yi057tr3wePRLk5Y41mtqUZXLwhRwmyyVK7GHuYJXbivqsiKj0LnRKmw9fuPh5sWlD6Xx+Gp4U1k/w3uvbZm9BfeLFufMpnuKWPO73vN3kp7lyVO7f7sdcoI5JvltCdkxTEqR3Sk4LcFQFDIZ+FKLY584alL1KtKLXS968BEjllfQBOkWq4pLMiAnOwrnDmYWUYVqWxYdRhs6UFnu5Y8c8euRxnV4PcKZ8S7J6/gCUTGOHDM1rB7l1JNSez/p/Qkor9uDtAtTIM0noYpn6UtcQiVSu9bUsazGY3hX3bYOYlekZdCd6O/8TawEmP9OnmflqJMqf7IrqZFBsPESmTsAF6/JcVYWHggb3tIAzVMy5XwtQBn1o6k+oRo8Q/zwRB0hkF5lXSE2T8td/CQSSUgMFL6PTQSrJlfPXnHUqsT9MMIBStfXeqdhSx8pdZf299U29XH5OkVhS6I14vadASTFUhoK2pUcxLBWS68UoCsKFWMoh+slCRocrelIwsE5xlRIpDPFaW/0zE7ydzw0n4+/49nN7K+WvXGHHLkh73c=
  - secure: n9Vc8m8NDJw3Hg0i0VAViuHe1qYyLhdBKYtvyUHBc1+nL8iDLfUnq1EJ8ohxf3XflIO/vc4aRpocV7H1sHvNdHKsTm+IkfVxxLkwjnt6vAi8BRiJnjt9MioJTEhG+VLPLQTbKdDPWxIlhLPkyMs30IkhPdoV4pb01cWkRk8gmyLO5dK24RbMZ7UQuu2FgD07Jf6PlAk1D1Som8DqB0oE7A5XsHNpmp8ZNW//YqMzE64WJbOrd3cbSdwuAkOliOlqsf4o5lSc5W2+0qd2a1yevzmluoq1+uYwScvbUN+/ZfzkivrjqnYZVG6bPkjOWN5ZBPtM9OTCRLKeP7+bzYRzdNW+zbOt7Jau1UWryhJ0nVbmU4NgCMjJUhTuXSoopBMnCGTkNvD27/2oY2baCTAIHj1Eku5ll2NLsMneZcrqIAJlIKTaF7VzLsZikBtnZGWi9iG4CBqr6JNYKfHq0QlBvsk8v2VT8BN86AFZphkLTuE8amnX9DxWNdKEmLsY+lI8FDe+JdteCEqgZXhxnmOzLiuTMOvFMIAcsl+wwUVgDWALBtxt6PSp3nlzazlZL0OUK0mh7M1HGLb2bSwjsS48IokuiCuDkP3BhY3/j3ebvsx9r4SC1r1AzbB9dtmQaw8Q3322NJkOzS6+jRWt30FiciL+lcVV4vMjQR/JSO9UjxY= to Travis env
